{"ast":null,"code":"var _jsxFileName = \"G:\\\\Learning\\\\ltw\\\\SbTickets_FE\\\\src\\\\pages\\\\Drivers\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Grid, CircularProgress, Button as MUIButton } from \"@material-ui/core\";\nimport MUIDataTable from \"mui-datatables\";\nimport * as AppURL from '../../services/urlAPI';\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\"; // components\n\nimport PageTitle from \"../../components/PageTitle\";\nimport instance from \"../../services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Tables() {\n  _s();\n\n  let history = useHistory();\n  const [datatableData, setData] = useState(null);\n  const [rowsSelectedByUser, setRowsSelected] = useState([]);\n  useEffect(() => {\n    instance.get(AppURL.getAllDrivers).then(res => {\n      console.log(JSON.stringify(res));\n      const body = res === null || res === void 0 ? void 0 : res.body;\n      const data = body.map(driver => {\n        let driverData = [];\n        driverData.push(driver === null || driver === void 0 ? void 0 : driver.id, driver === null || driver === void 0 ? void 0 : driver.nationalId, driver === null || driver === void 0 ? void 0 : driver.name, driver === null || driver === void 0 ? void 0 : driver.typeLicense, driver === null || driver === void 0 ? void 0 : driver.seniority);\n        return driverData;\n      });\n      setData(data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n\n  const handleRowClick = (rowData, rowMeta) => {\n    console.log('hello', rowData, rowMeta);\n    history.push(`/app/drivers/${rowData[0]}`);\n  };\n\n  const handleRowDelete = () => {\n    let rowsToDelete = [];\n    datatableData.map((data, idx) => {\n      if (rowsSelectedByUser.includes(idx)) rowsToDelete.push(data[0]);\n    });\n    instance.post(AppURL.deleteDrivers, rowsToDelete).then(res => {\n      toast.success(res === null || res === void 0 ? void 0 : res.msg);\n    }).catch(error => {\n      toast.error(error === null || error === void 0 ? void 0 : error.msg);\n      return false;\n    });\n  };\n\n  const handleSelectRow = (currentRowsSelected, allRowsSelected, rowsSelected) => {\n    setRowsSelected(rowsSelected);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n      title: \"Tables\",\n      button: /*#__PURE__*/_jsxDEV(MUIButton, {\n        variant: \"contained\",\n        size: \"medium\",\n        color: \"primary\",\n        onClick: () => {\n          history.push(`/app/drivers/create`);\n        },\n        children: \"New\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 4,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: datatableData ? /*#__PURE__*/_jsxDEV(MUIDataTable, {\n          title: \"Driver List\",\n          data: datatableData,\n          columns: [\"Code\", \"National ID\", \"Name\", \"License\", \"Seniority\"],\n          options: {\n            filterType: \"checkbox\",\n            draggableColumns: true,\n            onRowClick: handleRowClick,\n            onRowsDelete: handleRowDelete,\n            onRowSelectionChange: handleSelectRow\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Tables, \"c9zQCkVtPok3RPc7fzUnkZereXg=\", false, function () {\n  return [useHistory];\n});\n\n_c = Tables;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tables\");","map":{"version":3,"sources":["G:/Learning/ltw/SbTickets_FE/src/pages/Drivers/index.js"],"names":["React","useEffect","useState","Grid","CircularProgress","Button","MUIButton","MUIDataTable","AppURL","useHistory","toast","PageTitle","instance","Tables","history","datatableData","setData","rowsSelectedByUser","setRowsSelected","get","getAllDrivers","then","res","console","log","JSON","stringify","body","data","map","driver","driverData","push","id","nationalId","name","typeLicense","seniority","catch","error","handleRowClick","rowData","rowMeta","handleRowDelete","rowsToDelete","idx","includes","post","deleteDrivers","success","msg","handleSelectRow","currentRowsSelected","allRowsSelected","rowsSelected","filterType","draggableColumns","onRowClick","onRowsDelete","onRowSelectionChange"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Grid, CircularProgress, Button as MUIButton } from \"@material-ui/core\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport * as AppURL from '../../services/urlAPI';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\n// components\r\nimport PageTitle from \"../../components/PageTitle\";\r\nimport instance from \"../../services\";\r\n\r\nexport default function Tables() {\r\n  let history = useHistory();\r\n  const [datatableData, setData] = useState(null);\r\n  const [rowsSelectedByUser, setRowsSelected] = useState([]);\r\n  useEffect(() => {\r\n    instance.get(AppURL.getAllDrivers)\r\n      .then(res => {\r\n        console.log(JSON.stringify(res));\r\n        const body = res?.body;\r\n        const data = body.map(driver => {\r\n          let driverData = [];\r\n          driverData.push(driver?.id, driver?.nationalId, driver?.name, driver?.typeLicense, driver?.seniority);\r\n          return driverData;\r\n        })\r\n        setData(data);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }, [])\r\n\r\n  const handleRowClick = (rowData, rowMeta) => {\r\n    console.log('hello', rowData, rowMeta);\r\n    history.push(`/app/drivers/${rowData[0]}`);\r\n  }\r\n\r\n  const handleRowDelete = () => {\r\n    let rowsToDelete = [];\r\n    datatableData.map((data, idx) => {\r\n      if (rowsSelectedByUser.includes(idx))\r\n        rowsToDelete.push(data[0]);\r\n    })\r\n    instance.post(AppURL.deleteDrivers, rowsToDelete)\r\n      .then(res => {\r\n        toast.success(res?.msg);\r\n      }).catch(error => {\r\n        toast.error(error?.msg);\r\n        return false;\r\n      });\r\n  }\r\n\r\n  const handleSelectRow = (currentRowsSelected, allRowsSelected, rowsSelected) => {\r\n    setRowsSelected(rowsSelected);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PageTitle title=\"Tables\"\r\n        button={<MUIButton\r\n          variant=\"contained\"\r\n          size=\"medium\"\r\n          color=\"primary\"\r\n          onClick={() => { history.push(`/app/drivers/create`) }}\r\n        >\r\n          New\r\n        </MUIButton>} />\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={12}>\r\n          {\r\n            datatableData ? <MUIDataTable\r\n              title=\"Driver List\"\r\n              data={datatableData}\r\n              columns={[\"Code\", \"National ID\", \"Name\", \"License\", \"Seniority\"]}\r\n              options={{\r\n                filterType: \"checkbox\",\r\n                draggableColumns: true,\r\n                onRowClick: handleRowClick,\r\n                onRowsDelete: handleRowDelete,\r\n                onRowSelectionChange: handleSelectRow\r\n              }}\r\n            /> : <CircularProgress />\r\n          }\r\n\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}