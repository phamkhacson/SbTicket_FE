{"ast":null,"code":"var _jsxFileName = \"G:\\\\Learning\\\\ltw\\\\SbTickets_FE\\\\src\\\\pages\\\\Bus\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Grid, CircularProgress, Button as MUIButton } from \"@material-ui/core\";\nimport MUIDataTable from \"mui-datatables\";\nimport * as AppURL from '../../services/urlAPI';\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\"; // components\n\nimport PageTitle from \"../../components/PageTitle\";\nimport instance from \"../../services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Tables() {\n  _s();\n\n  let history = useHistory();\n  const [datatableData, setData] = useState(null);\n  const [rowsSelectedByUser, setRowsSelected] = useState([]);\n  useEffect(() => {\n    instance.get(AppURL.getAllBuses).then(res => {\n      const body = res === null || res === void 0 ? void 0 : res.body;\n      const data = body.map(bus => {\n        let busData = [];\n        busData.push(bus === null || bus === void 0 ? void 0 : bus.id, bus === null || bus === void 0 ? void 0 : bus.carNumber, bus === null || bus === void 0 ? void 0 : bus.color, bus === null || bus === void 0 ? void 0 : bus.manufacturer, bus === null || bus === void 0 ? void 0 : bus.lifeCar, bus === null || bus === void 0 ? void 0 : bus.numberSeats, bus === null || bus === void 0 ? void 0 : bus.yearUse, bus === null || bus === void 0 ? void 0 : bus.dateMantain);\n        return busData;\n      });\n      setData(data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n\n  const handleRowClick = (rowData, rowMeta) => {\n    console.log('hello', rowData, rowMeta);\n    history.push(`/app/buses/${rowData[0]}`);\n  };\n\n  const handleRowDelete = () => {\n    let rowsToDelete = [];\n    datatableData.map((data, idx) => {\n      if (rowsSelectedByUser.includes(idx)) rowsToDelete.push(data[0]);\n    });\n    instance.post(AppURL.deleteBuses, rowsToDelete).then(res => {\n      toast.success(res === null || res === void 0 ? void 0 : res.msg);\n    }).catch(error => {\n      toast.error(error === null || error === void 0 ? void 0 : error.msg);\n      return false;\n    });\n  };\n\n  const handleSelectRow = (currentRowsSelected, allRowsSelected, rowsSelected) => {\n    setRowsSelected(rowsSelected);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n      title: \"Tables\",\n      button: /*#__PURE__*/_jsxDEV(MUIButton, {\n        variant: \"contained\",\n        size: \"medium\",\n        color: \"primary\",\n        onClick: () => {\n          history.push(`/app/buses/create`);\n        },\n        children: \"New\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 4,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: datatableData ? /*#__PURE__*/_jsxDEV(MUIDataTable, {\n          title: \"Bus List\",\n          data: datatableData,\n          columns: [\"Code\", \"Car Number\", \"Color\", \"Manufacturer\", \"Life Car\"],\n          options: {\n            filterType: \"checkbox\",\n            draggableColumns: true,\n            onRowClick: handleRowClick,\n            onRowsDelete: handleRowDelete,\n            onRowSelectionChange: handleSelectRow\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Tables, \"c9zQCkVtPok3RPc7fzUnkZereXg=\", false, function () {\n  return [useHistory];\n});\n\n_c = Tables;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tables\");","map":{"version":3,"sources":["G:/Learning/ltw/SbTickets_FE/src/pages/Bus/index.js"],"names":["React","useEffect","useState","Grid","CircularProgress","Button","MUIButton","MUIDataTable","AppURL","useHistory","toast","PageTitle","instance","Tables","history","datatableData","setData","rowsSelectedByUser","setRowsSelected","get","getAllBuses","then","res","body","data","map","bus","busData","push","id","carNumber","color","manufacturer","lifeCar","numberSeats","yearUse","dateMantain","catch","error","console","log","handleRowClick","rowData","rowMeta","handleRowDelete","rowsToDelete","idx","includes","post","deleteBuses","success","msg","handleSelectRow","currentRowsSelected","allRowsSelected","rowsSelected","filterType","draggableColumns","onRowClick","onRowsDelete","onRowSelectionChange"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Grid, CircularProgress, Button as MUIButton } from \"@material-ui/core\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport * as AppURL from '../../services/urlAPI';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\n// components\r\nimport PageTitle from \"../../components/PageTitle\";\r\nimport instance from \"../../services\";\r\n\r\nexport default function Tables() {\r\n  let history = useHistory();\r\n  const [datatableData, setData] = useState(null);\r\n  const [rowsSelectedByUser, setRowsSelected] = useState([]);\r\n  useEffect(() => {\r\n    instance.get(AppURL.getAllBuses)\r\n      .then(res => {\r\n        const body = res?.body;\r\n        const data = body.map(bus => {\r\n          let busData = [];\r\n          busData.push(bus?.id, bus?.carNumber, bus?.color, bus?.manufacturer, bus?.lifeCar, bus?.numberSeats, bus?.yearUse, bus?.dateMantain);\r\n          return busData;\r\n        })\r\n        setData(data);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }, [])\r\n\r\n  const handleRowClick = (rowData, rowMeta) => {\r\n    console.log('hello', rowData, rowMeta);\r\n    history.push(`/app/buses/${rowData[0]}`);\r\n  }\r\n\r\n  const handleRowDelete = () => {\r\n    let rowsToDelete = [];\r\n    datatableData.map((data, idx) => {\r\n      if (rowsSelectedByUser.includes(idx))\r\n        rowsToDelete.push(data[0]);\r\n    })\r\n    instance.post(AppURL.deleteBuses, rowsToDelete)\r\n      .then(res => {\r\n        toast.success(res?.msg);\r\n      }).catch(error => {\r\n        toast.error(error?.msg);\r\n        return false;\r\n      });\r\n  }\r\n\r\n  const handleSelectRow = (currentRowsSelected, allRowsSelected, rowsSelected) => {\r\n    setRowsSelected(rowsSelected);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PageTitle title=\"Tables\"\r\n        button={<MUIButton\r\n          variant=\"contained\"\r\n          size=\"medium\"\r\n          color=\"primary\"\r\n          onClick={() => { history.push(`/app/buses/create`) }}\r\n        >\r\n          New\r\n        </MUIButton>} />\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={12}>\r\n          {\r\n            datatableData ? <MUIDataTable\r\n              title=\"Bus List\"\r\n              data={datatableData}\r\n              columns={[\"Code\", \"Car Number\", \"Color\", \"Manufacturer\", \"Life Car\"]}\r\n              options={{\r\n                filterType: \"checkbox\",\r\n                draggableColumns: true,\r\n                onRowClick: handleRowClick,\r\n                onRowsDelete: handleRowDelete,\r\n                onRowSelectionChange: handleSelectRow\r\n              }}\r\n            /> : <CircularProgress />\r\n          }\r\n\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}